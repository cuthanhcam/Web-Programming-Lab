// Account
@model Lab05.WebsiteBanHang.Models.LoginViewModel
@{
    ViewData["Title"] = "Đăng nhập";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-body">
                    <h2 class="text-center mb-4">Đăng nhập</h2>
                    <form asp-controller="Account" asp-action="Login" method="post">
                        <div asp-validation-summary="All" class="text-danger"></div>
                        <div class="form-group mb-3">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Password" class="form-label">Mật khẩu</label>
                            <input asp-for="Password" class="form-control" />
                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input asp-for="RememberMe" class="form-check-input" />
                                <label asp-for="RememberMe" class="form-check-label">Ghi nhớ đăng nhập</label>
                            </div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Đăng nhập</button>
                        </div>
                    </form>
                    <div class="text-center mt-3">
                        <p>Chưa có tài khoản? <a asp-controller="Account" asp-action="Register">Đăng ký ngay</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
} 
@{
    ViewData["Title"] = "Đăng xuất";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-body text-center">
                    <h2 class="mb-4">Đăng xuất</h2>
                    <p class="lead">Bạn có chắc chắn muốn đăng xuất?</p>
                    <form asp-controller="Account" asp-action="Logout" method="post">
                        <button type="submit" class="btn btn-danger">Đăng xuất</button>
                        <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Hủy</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div> 
@model Lab05.WebsiteBanHang.Models.ManageViewModel
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Quản lý tài khoản";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Quản lý tài khoản</h2>
    <form asp-action="Manage" method="post" class="card p-4 shadow-sm">
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                @TempData["SuccessMessage"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }
        <div class="form-group mb-3">
            <label asp-for="FullName" class="form-label fw-bold">Họ và tên</label>
            <input asp-for="FullName" class="form-control" required />
            <span asp-validation-for="FullName" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Email" class="form-label fw-bold">Email</label>
            <input asp-for="Email" class="form-control" readonly />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Address" class="form-label fw-bold">Địa chỉ</label>
            <input asp-for="Address" class="form-control" />
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Age" class="form-label fw-bold">Tuổi</label>
            <input asp-for="Age" class="form-control" type="number" />
            <span asp-validation-for="Age" class="text-danger"></span>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Cập nhật</button>
            <a asp-controller="Home" asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Hủy</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model Lab05.WebsiteBanHang.Models.RegisterViewModel
@{
    ViewData["Title"] = "Đăng ký";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow">
                <div class="card-body">
                    <h2 class="text-center mb-4">Đăng ký tài khoản</h2>
                    <form asp-controller="Account" asp-action="Register" method="post">
                        <div asp-validation-summary="All" class="text-danger"></div>
                        <div class="form-group mb-3">
                            <label asp-for="FullName" class="form-label">Họ và tên</label>
                            <input asp-for="FullName" class="form-control" />
                            <span asp-validation-for="FullName" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Password" class="form-label">Mật khẩu</label>
                            <input asp-for="Password" class="form-control" />
                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="ConfirmPassword" class="form-label">Xác nhận mật khẩu</label>
                            <input asp-for="ConfirmPassword" class="form-control" />
                            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Address" class="form-label">Địa chỉ</label>
                            <input asp-for="Address" class="form-control" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Age" class="form-label">Tuổi</label>
                            <input asp-for="Age" class="form-control" type="number" />
                            <span asp-validation-for="Age" class="text-danger"></span>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Đăng ký</button>
                        </div>
                    </form>
                    <div class="text-center mt-3">
                        <p>Đã có tài khoản? <a asp-controller="Account" asp-action="Login">Đăng nhập</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
} 

// Category
@model Lab05.WebsiteBanHang.Models.Category
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Add Category";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Add New Category</h2>
    <form asp-action="Create" method="post" class="card p-4 shadow-sm">
        <div class="form-group mb-3">
            <label asp-for="Name" class="form-label fw-bold">Name</label>
            <input asp-for="Name" class="form-control" required />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Add</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancel</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model Lab05.WebsiteBanHang.Models.Category
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Delete Category";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Delete Category</h2>
    <div class="card p-4 shadow-sm">
        <h3 class="text-danger text-center">Are you sure you want to delete this?</h3>
        <div class="text-center">
            <h4 class="fw-bold">@Model.Name</h4>
        </div>
        <form asp-action="Delete" method="post" class="d-flex justify-content-center gap-2 mt-3">
            <input type="hidden" asp-for="Id" />
            <button type="submit" class="btn btn-danger"><i class="bi bi-trash"></i> Delete</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancel</a>
        </form>
    </div>
</div>
@model Lab05.WebsiteBanHang.Models.Category
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Edit Category";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Edit Category</h2>
    <form asp-action="Edit" method="post" class="card p-4 shadow-sm">
        <input type="hidden" asp-for="Id" />
        <div class="form-group mb-3">
            <label asp-for="Name" class="form-label fw-bold">Name</label>
            <input asp-for="Name" class="form-control" required />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Save</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancel</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model List<Lab05.WebsiteBanHang.Models.Category>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Category List";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Category List</h2>
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    <a asp-action="Create" class="btn btn-success mb-3"><i class="bi bi-plus-circle"></i> Create New</a>

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Name</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @if (Model == null || !Model.Any())
                {
                    <tr>
                        <td colspan="2" class="text-muted">No categories available.</td>
                    </tr>
                }
                else
                {
                    @foreach (var category in Model)
                    {
                        <tr>
                            <td>@category.Name</td>
                            <td>
                                <a asp-action="Edit" asp-route-id="@category.Id" class="btn btn-warning btn-sm"><i class="bi bi-pencil"></i> Edit</a>
                                <a asp-action="Delete" asp-route-id="@category.Id" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i> Delete</a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
// Home
@model List<Lab05.WebsiteBanHang.Models.Product>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Home Page";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Our Products</h2>
    <div class="row">
        @foreach (var product in Model)
        {
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm h-100">
                    @if (product.Images != null && product.Images.Any())
                    {
                        <img src="@product.Images.First().Url" class="card-img-top" alt="@product.Name"
                            style="height: 200px; object-fit: cover;" />
                    }
                    else if (!string.IsNullOrEmpty(product.ImageUrl))
                    {
                        <img src="@product.ImageUrl" class="card-img-top" alt="@product.Name"
                            style="height: 200px; object-fit: cover;" />
                    }
                    else
                    {
                        <div class="card-img-top bg-light d-flex align-items-center justify-content-center"
                            style="height: 200px;">
                            <span class="text-muted">No image</span>
                        </div>
                    }
                    <div class="card-body">
                        <h5 class="card-title">@product.Name</h5>
                        <p class="card-text"><strong>Price:</strong> $@product.Price.ToString("F2")</p>
                        <p class="card-text text-truncate" title="@product.Description">@product.Description</p>
                    </div>
                    <div class="card-footer text-center bg-white border-0">
                        <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id"
                            class="btn btn-primary btn-sm">
                            <i class="bi bi-eye"></i> View Details
                        </a>
                        <form asp-controller="ShoppingCart" asp-action="AddToCart" method="post" class="d-inline">
                            <input type="hidden" name="productId" value="@product.Id" />
                            <button type="submit" class="btn btn-success btn-sm">
                                <i class="bi bi-cart-plus"></i> Thêm vào giỏ
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
// Order
@model Lab05.WebsiteBanHang.Models.Order
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Chi tiết đơn hàng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Chi tiết đơn hàng #@Model.Id</h2>

    <div class="card shadow p-4 mb-4">
        <h4>Thông tin đơn hàng</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-3">Mã đơn hàng</dt>
            <dd class="col-sm-9">#@Model.Id</dd>
            <dt class="col-sm-3">Ngày đặt hàng</dt>
            <dd class="col-sm-9">@Model.OrderDate.ToString("dd/MM/yyyy HH:mm")</dd>
            <dt class="col-sm-3">Tổng tiền</dt>
            <dd class="col-sm-9">$@Model.TotalPrice.ToString("F2")</dd>
            <dt class="col-sm-3">Địa chỉ giao hàng</dt>
            <dd class="col-sm-9">@Model.ShippingAddress</dd>
            <dt class="col-sm-3">Ghi chú</dt>
            <dd class="col-sm-9">@Model.Notes</dd>
            <dt class="col-sm-3">Trạng thái</dt>
            <dd class="col-sm-9">@Model.Status</dd>
        </dl>
    </div>

    <div class="card shadow p-4">
        <h4>Danh sách sản phẩm</h4>
        <hr />
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Tên sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Tổng</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var detail in Model.OrderDetails)
                    {
                        <tr>
                            <td>@detail.Product?.Name</td>
                            <td>$@detail.Price.ToString("F2")</td>
                            <td>@detail.Quantity</td>
                            <td>$@(detail.Price * detail.Quantity).ToString("F2")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Quay lại
        </a>
    </div>
</div>
@model IEnumerable<Lab05.WebsiteBanHang.Models.Order>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Danh sách đơn hàng của bạn";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Danh sách đơn hàng của bạn</h2>

    @if (Model.Any())
    {
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Mã đơn hàng</th>
                        <th>Ngày đặt hàng</th>
                        <th>Tổng tiền</th>
                        <th>Địa chỉ giao hàng</th>
                        <th>Trạng thái</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model)
                    {
                        <tr>
                            <td>#@order.Id</td>
                            <td>@order.OrderDate.ToString("dd/MM/yyyy HH:mm")</td>
                            <td>$@(order.TotalPrice.ToString("F2"))</td>
                            <td>@order.ShippingAddress</td>
                            <td>@order.Status</td>
                            <td>
                                <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-info btn-sm">
                                    <i class="bi bi-eye"></i> Xem chi tiết
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="text-center text-muted">Bạn chưa có đơn hàng nào.</p>
        <div class="text-center">
            <a asp-controller="Product" asp-action="Index" class="btn btn-primary">
                <i class="bi bi-cart-plus"></i> Mua sắm ngay
            </a>
        </div>
    }
</div>
// OrderManagement
@model Lab05.WebsiteBanHang.Models.Order
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Chi tiết đơn hàng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Chi tiết đơn hàng #@Model.Id</h2>

    <div class="card shadow p-4 mb-4">
        <h4>Thông tin đơn hàng</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-3">Mã đơn hàng</dt>
            <dd class="col-sm-9">#@Model.Id</dd>

            <dt class="col-sm-3">Ngày đặt hàng</dt>
            <dd class="col-sm-9">@Model.OrderDate.ToString("dd/MM/yyyy HH:mm")</dd>

            <dt class="col-sm-3">Khách hàng</dt>
            <dd class="col-sm-9">@(Model.ApplicationUser?.Email ?? "Không xác định")</dd>

            <dt class="col-sm-3">Tổng tiền</dt>
            <dd class="col-sm-9">$@Model.TotalPrice.ToString("F2")</dd>

            <dt class="col-sm-3">Địa chỉ giao hàng</dt>
            <dd class="col-sm-9">@Model.ShippingAddress</dd>

            <dt class="col-sm-3">Ghi chú</dt>
            <dd class="col-sm-9">@Model.Notes</dd>

            <dt class="col-sm-3">Trạng thái</dt>
            <dd class="col-sm-9">
                @Model.Status
                <a asp-action="EditStatus" asp-route-id="@Model.Id" class="btn btn-warning btn-sm ms-2">
                    <i class="bi bi-pencil"></i> Chỉnh sửa
                </a>
            </dd>
        </dl>
    </div>

    <div class="card shadow p-4">
        <h4>Danh sách sản phẩm</h4>
        <hr />
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Tên sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Tổng</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var detail in Model.OrderDetails)
                    {
                        <tr>
                            <td>@detail.Product?.Name</td>
                            <td>$@detail.Price.ToString("F2")</td>
                            <td>@detail.Quantity</td>
                            <td>$@(detail.Price * detail.Quantity).ToString("F2")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-4">
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Quay lại
        </a>
    </div>
</div>
@model Lab05.WebsiteBanHang.Models.Order
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Chỉnh sửa trạng thái đơn hàng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Chỉnh sửa trạng thái đơn hàng #@Model.Id</h2>

    <div class="card shadow p-4">
        <form asp-action="EditStatus" method="post">
            <input type="hidden" asp-for="Id" />
            <div class="form-group mb-3">
                <label class="form-label fw-bold">Trạng thái</label>
                <select asp-for="Status" class="form-select">
                    <option value="Chờ xử lý">Chờ xử lý</option>
                    <option value="Đang giao">Đang giao</option>
                    <option value="Hoàn thành">Hoàn thành</option>
                    <option value="Hủy">Hủy</option>
                </select>
            </div>
            <div class="d-flex justify-content-end gap-2">
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Hủy
                </a>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Lưu
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model IEnumerable<Lab05.WebsiteBanHang.Models.Order>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Quản lý đơn hàng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Quản lý đơn hàng</h2>

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Mã đơn hàng</th>
                    <th>Ngày đặt hàng</th>
                    <th>Khách hàng</th>
                    <th>Tổng tiền</th>
                    <th>Địa chỉ giao hàng</th>
                    <th>Ghi chú</th>
                    <th>Trạng thái</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model)
                {
                    <tr>
                        <td>#@order.Id</td>
                        <td>@order.OrderDate.ToString("dd/MM/yyyy HH:mm")</td>
                        <td>@(order.ApplicationUser?.Email ?? "Không xác định")</td>
                        <td>$@(order.TotalPrice.ToString("F2"))</td>
                        <td>@order.ShippingAddress</td>
                        <td>@order.Notes</td>
                        <td>@order.Status</td>
                        <td>
                            <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-info btn-sm">
                                <i class="bi bi-eye"></i> Xem chi tiết
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
// Product
@model Lab05.WebsiteBanHang.Models.Product
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Thêm sản phẩm";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Thêm sản phẩm mới</h2>
    <form asp-action="Create" method="post" enctype="multipart/form-data" class="card p-4 shadow-sm">
        <div class="form-group mb-3">
            <label asp-for="Name" class="form-label fw-bold">Tên sản phẩm</label>
            <input asp-for="Name" class="form-control" required />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Price" class="form-label fw-bold">Giá</label>
            <input asp-for="Price" class="form-control" required />
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Description" class="form-label fw-bold">Mô tả</label>
            <textarea asp-for="Description" class="form-control" rows="4"></textarea>
        </div>
        <div class="form-group mb-3">
            <label asp-for="CategoryId" class="form-label fw-bold">Danh mục</label>
            <select asp-for="CategoryId" class="form-select" asp-items="@((SelectList)ViewData["CategoryId"])" required>
                <option value="">-- Chọn danh mục --</option>
            </select>
            <span asp-validation-for="CategoryId" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label class="form-label fw-bold">Hình ảnh sản phẩm</label>
            <input type="file" name="images" multiple class="form-control" accept="image/*" />
            <small class="text-muted">Bạn có thể chọn nhiều ảnh cùng lúc</small>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Thêm</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Hủy</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
} 
@model Lab05.WebsiteBanHang.Models.Product
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Delete Product";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Delete Product</h2>
    <div class="card p-4 shadow-sm">
        <h3 class="text-danger text-center">Are you sure you want to delete this?</h3>
        <div class="text-center">
            <h4 class="fw-bold">@Model.Name</h4>
            <p>Price: $@Model.Price.ToString("F2")</p>
            <p>Category: @(Model.Category?.Name ?? "N/A")</p>
            @if (!string.IsNullOrEmpty(Model.ImageUrl) || (Model.Images != null && Model.Images.Any()))
            {
                <div class="d-flex flex-wrap gap-2 justify-content-center mb-3">
                    @if (!string.IsNullOrEmpty(Model.ImageUrl))
                    {
                        <img src="@Model.ImageUrl" alt="@Model.Name" class="img-fluid rounded" style="max-width: 200px;" />
                    }
                    @if (Model.Images != null && Model.Images.Any())
                    {
                        @foreach (var image in Model.Images)
                        {
                            <img src="@image.Url" alt="@Model.Name" class="img-fluid rounded" style="max-width: 200px;" />
                        }
                    }
                </div>
            }
            else
            {
                <p class="text-muted">No images available.</p>
            }
        </div>
        <form asp-action="Delete" method="post" class="d-flex justify-content-center gap-2 mt-3">
            <input type="hidden" asp-for="Id" />
            <button type="submit" class="btn btn-danger"><i class="bi bi-trash"></i> Delete</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancel</a>
        </form>
    </div>
</div>
@model Lab05.WebsiteBanHang.Models.Product
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Product Details";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">@Model.Name</h2>
    <div class="card p-4 shadow-sm">
        <div class="row">
            <div class="col-md-6 text-center">
                @if (!string.IsNullOrEmpty(Model.ImageUrl) || (Model.Images != null && Model.Images.Any()))
                {
                    <div id="productImageCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            @if (!string.IsNullOrEmpty(Model.ImageUrl))
                            {
                                <!-- Hiển thị ImageUrl trước -->
                                <div class="carousel-item active">
                                    <img src="@Model.ImageUrl" class="d-block w-100" alt="@Model.Name" style="max-height: 400px; object-fit: contain;" />
                                </div>
                            }
                            @if (Model.Images != null && Model.Images.Any())
                            {
                                <!-- Hiển thị các ảnh từ Images -->
                                @foreach (var image in Model.Images)
                                {
                                    <div class="carousel-item @(string.IsNullOrEmpty(Model.ImageUrl) && image == Model.Images.First() ? "active" : "")">
                                        <img src="@image.Url" class="d-block w-100" alt="@Model.Name" style="max-height: 400px; object-fit: contain;" />
                                    </div>
                                }
                            }
                        </div>
                        @if ((!string.IsNullOrEmpty(Model.ImageUrl) && Model.Images != null && Model.Images.Any()) || (Model.Images != null && Model.Images.Count > 1))
                        {
                            <!-- Hiển thị nút điều hướng nếu có nhiều hơn 1 ảnh -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#productImageCarousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#productImageCarousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        }
                    </div>
                }
                else
                {
                    <p class="text-muted">No image available</p>
                }
            </div>
            <div class="col-md-6">
                <h3>Price: $@Model.Price.ToString("F2")</h3>
                <p><strong>Description:</strong> @(Model.Description ?? "No description")</p>
                <p><strong>Category:</strong> @(Model.Category?.Name ?? "N/A")</p>
            </div>
        </div>
        <div class="text-center mt-4">
            <a asp-action="Index" class="btn btn-primary"><i class="bi bi-arrow-left"></i> Back to List</a>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Nếu cần thêm script cho carousel (thường đã có trong Bootstrap) -->
}
@model Lab05.WebsiteBanHang.Models.Product
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Sửa sản phẩm";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Sửa sản phẩm</h2>
    <form asp-action="Edit" method="post" enctype="multipart/form-data" class="card p-4 shadow-sm">
        <input type="hidden" asp-for="Id" />
        <div class="form-group mb-3">
            <label asp-for="Name" class="form-label fw-bold">Tên sản phẩm</label>
            <input asp-for="Name" class="form-control" required />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Price" class="form-label fw-bold">Giá</label>
            <input asp-for="Price" class="form-control" required />
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Description" class="form-label fw-bold">Mô tả</label>
            <textarea asp-for="Description" class="form-control" rows="4"></textarea>
        </div>
        <div class="form-group mb-3">
            <label asp-for="CategoryId" class="form-label fw-bold">Danh mục</label>
            <select asp-for="CategoryId" class="form-select" asp-items="@((SelectList)ViewData["CategoryId"])" required>
                <option value="">-- Chọn danh mục --</option>
            </select>
            <span asp-validation-for="CategoryId" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label class="form-label fw-bold">Hình ảnh hiện tại</label>
            <div class="row">
                @if (Model.Images != null && Model.Images.Any())
                {
                    foreach (var image in Model.Images)
                    {
                        <div class="col-md-4 mb-3">
                            <div class="card">
                                <img src="@image.Url" class="card-img-top" alt="Product Image">
                                <div class="card-body">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="deleteImages" value="@image.Id" id="deleteImage_@image.Id">
                                        <label class="form-check-label" for="deleteImage_@image.Id">
                                            Xóa ảnh này
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <div class="col-12">
                        <p class="text-muted">Chưa có hình ảnh nào</p>
                    </div>
                }
            </div>
        </div>
        <div class="form-group mb-3">
            <label class="form-label fw-bold">Thêm hình ảnh mới</label>
            <input type="file" name="images" multiple class="form-control" accept="image/*" />
            <small class="text-muted">Bạn có thể chọn nhiều ảnh cùng lúc</small>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Lưu</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Hủy</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
} 
@model List<Lab05.WebsiteBanHang.Models.Product>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Product List";
}

<div class="container mt-5">
    <h2 class="mb-4 text-center">Product List</h2>

    <!-- Form lọc và tìm kiếm -->
    <form asp-action="Index" method="get" class="mb-4">
        <div class="row g-3 align-items-end">
            <div class="col-md-4">
                <label class="form-label fw-bold">Tìm kiếm sản phẩm</label>
                <input type="text" name="searchString" class="form-control" value="@ViewData["CurrentSearch"]"
                    placeholder="Nhập tên sản phẩm..." />
            </div>
            <div class="col-md-3">
                <label class="form-label fw-bold">Danh mục</label>
                <select name="categoryId" class="form-select">
                    <option value="">-- Tất cả danh mục --</option>
                    @foreach (var item in (SelectList)ViewData["Categories"])
                    {
                        <option value="@item.Value"
                            selected="@(item.Value == ViewData["CurrentCategory"]?.ToString() ? "selected" : null)">
                            @item.Text
                        </option>
                    }
                </select>
            </div>
            <div class="col-md-3">
                <label class="form-label fw-bold">Sắp xếp</label>
                <select name="sortOrder" class="form-select">
                    @if (string.IsNullOrEmpty(ViewData["CurrentSort"]?.ToString()))
                    {
                        <option value="" selected>Mặc định (Tên)</option>
                    }
                    else
                    {
                        <option value="">Mặc định (Tên)</option>
                    }

                    @if (ViewData["CurrentSort"]?.ToString() == "price_asc")
                    {
                        <option value="price_asc" selected>Giá tăng dần</option>
                    }
                    else
                    {
                        <option value="price_asc">Giá tăng dần</option>
                    }

                    @if (ViewData["CurrentSort"]?.ToString() == "price_desc")
                    {
                        <option value="price_desc" selected>Giá giảm dần</option>
                    }
                    else
                    {
                        <option value="price_desc">Giá giảm dần</option>
                    }
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100"><i class="bi bi-search"></i> Lọc</button>
            </div>
        </div>
    </form>

    @if (User.IsInRole(SD.Role_Admin) || User.IsInRole(SD.Role_Employee))
    {
        <a asp-action="Create" class="btn btn-success mb-3"><i class="bi bi-plus-circle"></i> Create New</a>
    }

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Description</th>
                    <th>Category</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var product in Model)
                {
                    <tr>
                        <td>
                            @if (product.Images != null && product.Images.Any())
                            {
                                <img src="@product.Images.First().Url" alt="@product.Name" class="img-fluid rounded"
                                    style="max-width: 100px;" />
                            }
                            else if (!string.IsNullOrEmpty(product.ImageUrl))
                            {
                                <img src="@product.ImageUrl" alt="@product.Name" class="img-fluid rounded"
                                    style="max-width: 100px;" />
                            }
                            else
                            {
                                <span class="text-muted">No image</span>
                            }
                        </td>
                        <td>
                            <a asp-action="Details" asp-route-id="@product.Id"
                                class="text-decoration-none fw-bold text-primary">
                                @product.Name
                            </a>
                        </td>
                        <td>$@product.Price.ToString("F2")</td>
                        <td>@product.Description</td>
                        <td>@(product.Category?.Name ?? "N/A")</td>
                        <td>
                            @if (User.IsInRole(SD.Role_Admin) || User.IsInRole(SD.Role_Employee))
                            {
                                <a asp-action="Edit" asp-route-id="@product.Id" class="btn btn-warning btn-sm"><i
                                        class="bi bi-pencil"></i> Edit</a>
                                <a asp-action="Delete" asp-route-id="@product.Id" class="btn btn-danger btn-sm"><i
                                        class="bi bi-trash"></i> Delete</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
// ShoppingCart
@model Lab05.WebsiteBanHang.Models.Order
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Thanh toán";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Thanh toán</h2>
    <form asp-action="Checkout" method="post" class="card p-4 shadow-sm">
        <div asp-validation-summary="All" class="text-danger mb-3"></div>
        <input type="hidden" asp-for="UserId" />
        <div class="form-group mb-3">
            <label asp-for="ShippingAddress" class="form-label fw-bold"></label>
            <input asp-for="ShippingAddress" class="form-control" required />
            <span asp-validation-for="ShippingAddress" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Notes" class="control-label">Ghi chú</label>
            <textarea asp-for="Notes" class="form-control"></textarea>
            <span asp-validation-for="Notes" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label class="form-label fw-bold">Tổng tiền</label>
            <input class="form-control" value="$@Model.TotalPrice.ToString("F2")" readonly />
        </div>
        <div class="d-flex justify-content-end gap-2">
            <a asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Quay lại giỏ hàng
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-circle"></i> Đặt hàng
            </button>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model Lab05.WebsiteBanHang.Models.Cart
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Giỏ hàng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Giỏ hàng của bạn</h2>

    @if (Model.Items.Any())
    {
        <div class="table-responsive">
            <table class="table table-striped table-bordered text-center align-middle">
                <thead class="table-dark">
                    <tr>
                        <th>Tên sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Tổng</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.Items)
                    {
                        <tr>
                            <td>@item.Name</td>
                            <td>$@item.Price.ToString("F2")</td>
                            <td>
                                <div class="d-flex justify-content-center align-items-center">
                                    <form asp-action="DecreaseQuantity" method="post" class="d-inline">
                                        <input type="hidden" name="productId" value="@item.ProductId" />
                                        <button type="submit" class="btn btn-outline-secondary btn-sm">-</button>
                                    </form>
                                    <span class="mx-2">@item.Quantity</span>
                                    <form asp-action="IncreaseQuantity" method="post" class="d-inline">
                                        <input type="hidden" name="productId" value="@item.ProductId" />
                                        <button type="submit" class="btn btn-outline-secondary btn-sm">+</button>
                                    </form>
                                </div>
                            </td>
                            <td>$@((item.Price * item.Quantity).ToString("F2"))</td>
                            <td>
                                <form asp-action="RemoveFromCart" method="post" class="d-inline">
                                    <input type="hidden" name="productId" value="@item.ProductId" />
                                    <button type="submit" class="btn btn-danger btn-sm">
                                        <i class="bi bi-trash"></i> Xóa
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3" class="text-end fw-bold">Tổng cộng:</td>
                        <td class="fw-bold">$@Model.GetTotalPrice().ToString("F2")</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        <div class="d-flex justify-content-between mt-3">
            <a asp-controller="Product" asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left"></i> Tiếp tục mua sắm
            </a>
            <a asp-action="Checkout" class="btn btn-primary">
                <i class="bi bi-cart-check"></i> Thanh toán
            </a>
        </div>
    }
    else
    {
        <p class="text-center text-muted">Giỏ hàng của bạn đang trống.</p>
        <div class="text-center">
            <a asp-controller="Product" asp-action="Index" class="btn btn-primary">
                <i class="bi bi-cart-plus"></i> Mua sắm ngay
            </a>
        </div>
    }
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model int
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Đặt hàng thành công";
}

<div class="container mt-5 text-center">
    <div class="card shadow p-4">
        <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
        <h2 class="mt-4">Đặt hàng thành công!</h2>
        <p class="lead">Đơn hàng của bạn với mã <strong>#@Model</strong> đã được đặt thành công.</p>
        <div class="mt-4">
            <a asp-controller="Home" asp-action="Index" class="btn btn-primary">
                <i class="bi bi-house"></i> Về trang chủ
            </a>
            <a asp-controller="Product" asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-cart-plus"></i> Tiếp tục mua sắm
            </a>
        </div>
    </div>
</div>
//user
@model Lab05.WebsiteBanHang.Models.RegisterViewModel
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Thêm người dùng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Thêm người dùng mới</h2>
    <form asp-action="Create" method="post" class="card p-4 shadow-sm">
        <div class="form-group mb-3">
            <label asp-for="FullName" class="form-label fw-bold">Họ và tên</label>
            <input asp-for="FullName" class="form-control" required />
            <span asp-validation-for="FullName" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Email" class="form-label fw-bold">Email</label>
            <input asp-for="Email" class="form-control" required />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Password" class="form-label fw-bold">Mật khẩu</label>
            <input asp-for="Password" class="form-control" required />
            <span asp-validation-for="Password" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="ConfirmPassword" class="form-label fw-bold">Xác nhận mật khẩu</label>
            <input asp-for="ConfirmPassword" class="form-control" required />
            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Address" class="form-label fw-bold">Địa chỉ</label>
            <input asp-for="Address" class="form-control" />
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Age" class="form-label fw-bold">Tuổi</label>
            <input asp-for="Age" class="form-control" type="number" />
            <span asp-validation-for="Age" class="text-danger"></span>
        </div>
        <div class="d-flex justify-content-end gap-2">
            <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Thêm</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Hủy</a>
        </div>
        <div asp-validation-summary="All" class="text-danger mt-3"></div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model Lab05.WebsiteBanHang.Models.UserRoleViewModel
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Xóa người dùng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Xóa người dùng</h2>
    <div class="card p-4 shadow-sm">
        <h3 class="text-danger text-center">Bạn có chắc chắn muốn xóa người dùng này?</h3>
        <div class="text-center">
            <h4 class="fw-bold">@Model.FullName</h4>
            <p>Email: @Model.Email</p>
            <p>Vai trò: @string.Join(", ", Model.Roles)</p>
        </div>
        <form asp-action="Delete" method="post" class="d-flex justify-content-center gap-2 mt-3">
            <input type="hidden" asp-for="UserId" />
            <button type="submit" class="btn btn-danger"><i class="bi bi-trash"></i> Xóa</button>
            <a asp-action="Index" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Hủy</a>
        </form>
    </div>
</div>
@model Lab05.WebsiteBanHang.Models.UserRoleViewModel
@using Lab05.WebsiteBanHang.Models
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Sửa thông tin người dùng";
}

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title mb-4">Sửa thông tin người dùng</h2>
                    <form asp-action="Edit" method="post">
                        <input type="hidden" asp-for="UserId" />
                        <div asp-validation-summary="All" class="text-danger"></div>
                        <div class="form-group mb-3">
                            <label class="form-label">Tên đăng nhập</label>
                            <input asp-for="UserName" class="form-control" readonly />
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="FullName" class="form-label">Họ và tên</label>
                            <input asp-for="FullName" class="form-control" required />
                            <span asp-validation-for="FullName" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" class="form-control" required />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Address" class="form-label">Địa chỉ</label>
                            <input asp-for="Address" class="form-control" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label asp-for="Age" class="form-label">Tuổi</label>
                            <input asp-for="Age" class="form-control" type="number" />
                            <span asp-validation-for="Age" class="text-danger"></span>
                        </div>
                        <div class="form-group mb-3">
                            <label class="form-label">Vai trò</label>
                            <div class="row">
                                @foreach (var role in Model.AvailableRoles)
                                {
                                    <div class="col-md-4 mb-2">
                                        <div class="form-check">
                                            @if (Model.IsTargetUserAdmin)
                                            {
                                                <input class="form-check-input" type="radio" name="Roles" value="@role" 
                                                       @(Model.Roles.Contains(role) ? "checked" : "") id="role_@role" disabled>
                                            }
                                            else
                                            {
                                                <input class="form-check-input" type="radio" name="Roles" value="@role" 
                                                       @(Model.Roles.Contains(role) ? "checked" : "") id="role_@role">
                                            }
                                            <label class="form-check-label" for="role_@role">
                                                @role
                                            </label>
                                        </div>
                                    </div>
                                }
                            </div>
                            @if (Model.IsTargetUserAdmin)
                            {
                                <small class="text-muted">Không thể thay đổi vai trò của tài khoản Admin</small>
                            }
                        </div>
                        <div class="d-flex justify-content-end gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Lưu
                            </button>
                            <a asp-action="Index" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Hủy
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
@model IEnumerable<Lab05.WebsiteBanHang.Models.UserRoleViewModel>
@{
    Layout = ViewData["Layout"] as string ?? "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Quản lý người dùng";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Quản lý người dùng</h2>
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }
    <a asp-action="Create" class="btn btn-success mb-3"><i class="bi bi-plus-circle"></i> Thêm mới</a>

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Tên đăng nhập</th>
                    <th>Họ và tên</th>
                    <th>Email</th>
                    <th>Vai trò</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model)
                {
                    <tr>
                        <td>@user.UserName</td>
                        <td>@user.FullName</td>
                        <td>@user.Email</td>
                        <td>@string.Join(", ", user.Roles)</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@user.UserId" class="btn btn-warning btn-sm">
                                <i class="bi bi-pencil"></i> Sửa
                            </a>
                            @if (!user.Roles.Contains("Admin") || (user.Roles.Contains("Admin") && user.IsCurrentUserAdmin && user.UserId == ViewBag.CurrentUserId))
                            {
                                <form asp-action="Delete" asp-route-id="@user.UserId" method="post" class="d-inline">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Bạn có chắc chắn muốn xóa người dùng này?')">
                                        <i class="bi bi-trash"></i> Xóa
                                    </button>
                                </form>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
